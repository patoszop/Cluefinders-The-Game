<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="style.css" />
  <title>Cluefinders ‚Äì Level 4 (Stage 2)</title>
  <style>
    /* Unique twist for Level 4 Stage 2: Invisible button - zachowano */
    #invisibleBtn {
        position: absolute;
        top: 800px;
        left: 33%;
        width: 100px;
        height: 100px;
        background: transparent;
        border: none;
        cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Level 4 ‚Äì Stage 2</h1>
  <p>Find the invisible area on the screen. The clue you are looking for is hidden somewhere in this page.</p>
  
  <a href="level4.html">Go back to Stage 1</a>
  <button onclick="confirmExitToHub()" style="margin-left: 10px;">Back to Hub</button>

  <button id="invisibleBtn"></button>

  <div id="hiddenHint2" style="display: none; margin-top: 30px;">
    <p><strong>Clue 2:</strong> The date is 1987-04-16.</p>
  </div>

  <a href="level4-stage3.html" id="stage3Link" style="display: none;">Proceed to Stage 3</a>

  <script>
    // --- Updated Functionality: Exit Confirmation with improved message ---
    function confirmExitToHub() {
        const exitConfirmed = confirm("Are you sure you want to exit the current puzzle and return to the Hub? Any temporary clues or unsaved input will be lost.");
        if (exitConfirmed) {
            window.location.href = 'hub.html';
        }
    }

    document.getElementById("invisibleBtn").addEventListener("click", () => {
      document.getElementById("hiddenHint2").style.display = "block";
      document.getElementById("stage3Link").style.display = "inline-block";
    });

    // Dev helper ‚Äî type `devOutlines()` in the console
    function devOutlines() {
      const all = document.querySelectorAll("*");
      all.forEach(el => {
        const style = window.getComputedStyle(el);
        const isVisible = style.display !== "none" && style.visibility !== "hidden" && style.opacity !== "0";

        if (!isVisible || el.offsetWidth === 0 || el.offsetHeight === 0) {
          el.style.outline = "2px dashed red";
        } else {
          el.style.outline = "1px dashed limegreen";
        }
      });

      console.log("üîç Dev outlines added (red = hidden, green = visible)");
    }
  </script>
</body>
</html>