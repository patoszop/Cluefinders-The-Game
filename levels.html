<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css" />
  <title>Cluefinders â€“ Levels</title>
  <style>
    /* Setting body background */
    body {
      background-image: url('win-old-bg.png');
    }

    /* Dialog Box Container */
    #retro-window {
      max-width: 450px;
      margin: 100px auto;
      background-color: #f0f0f0; /* Windows background color */
      border: 3px outset #fff; /* Raised border */
      padding: 5px;
      box-shadow: 4px 4px 0 #000;
      text-align: center; /* Center the window content */
    }

    /* Title Bar */
    #title-bar {
      background: linear-gradient(to right, #000080, #1084d8);
      color: #fff;
      padding: 4px 8px;
      font-weight: bold;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* "X" Button */
    .close-btn {
      background: #c0d6f7;
      border: 2px outset #fff;
      color: #000;
      padding: 0 6px;
      line-height: 1;
      height: 18px;
      cursor: pointer;
      font-family: Arial, sans-serif;
      font-weight: bold;
    }

    /* Level List Style */
    ul { 
      list-style: none; 
      padding: 10px; 
      border: 2px inset #fff; /* Inset list frame */
      background-color: #c0d6f7; /* Light blue list background */
      max-width: 250px;
      margin: 15px auto;
      text-align: left;
    }
    
    li { 
      margin: 5px 0; 
    }

    /* Styles for header */
    h1 {
        margin-top: 0;
    }

    /* Locked Levels Style */
    .locked { 
        color: #888; 
        text-decoration: none; 
        pointer-events: none; 
        font-style: italic;
    } 
  </style>
</head>
<body>
  
  <div id="retro-window">
    <div id="title-bar">
      <span>Cluefinders - [ Levels ]</span>
      <span class="close-btn">X</span>
    </div>

    <h1>Unlocked Levels</h1>
    <ul>
      <li><a href="level1.html">Level 1</a></li>
      <li><a id="lvl2" class="locked">Level 2</a></li>
      <li><a id="lvl3" class="locked">Level 3</a></li> 
      <li><a id="lvl4" class="locked">Level 4</a></li>
      <li><a id="lvl5" class="locked">Level 5 - In Development</a></li> 
    </ul>

    <button onclick="window.location.href='hub.html'"><strong>&gt;</strong> Back to Hub <strong>&lt;</strong></button>
  </div>

  <script>
    // Makes the "X" button hide the window
    document.querySelector('.close-btn').addEventListener('click', () => {
      document.getElementById('retro-window').style.display = 'none';
    });
    
    // Get current progress from localStorage (defaults to 1)
    const progress = parseInt(localStorage.getItem("userprogress") || "1");

    // Loop through levels starting from 2 up to the current progress level
    for (let i = 2; i <= progress; i++) {
      const el = document.getElementById(`lvl${i}`);
      if (el) {
        // Remove 'locked' class (visual unlock)
        el.classList.remove("locked");
        // Set the actual link (functional unlock)
        el.href = `level${i}.html`;
      }
    }
  </script>
</body>
</html>